!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=10)}([function(e,t,r){"use strict";r.d(t,"d",(function(){return n})),r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return c})),r.d(t,"a",(function(){return i})),r.d(t,"f",(function(){return s})),r.d(t,"e",(function(){return u})),r.d(t,"g",(function(){return a}));const n=3,o=7,c=3,i=20,s={isRequired:"Нужно ввести ключевое слово"},u={none:"none",block:"block",flex:"flex"},a={newsArticles:"newsArticles",newsCount:"newsCount",keyword:"keyword"}},function(e,t,r){"use strict";function n(e){const t=new Date(e).toLocaleDateString("ru-Ru",{day:"numeric",month:"long",year:"numeric"}).slice(0,-3).split(" ");return`${t[0]} ${t[1]}, ${t[2]}`}function o(e){return new Date(e).toLocaleDateString("ru-Ru",{day:"numeric",weekday:"short",month:"long",year:"numeric"})}function c(e){return e.split(", ")[1].split(" ")[1]}function i(e){const t=e.split(", "),r=t[0];return`${t[1].split(" ")[0]}, ${r}`}function s(e){return e.split("T")[0]}r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return o})),r.d(t,"d",(function(){return c})),r.d(t,"c",(function(){return i})),r.d(t,"e",(function(){return s}))},,function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(0);class o{constructor(){}setNews(e){localStorage.setItem(n.g.newsArticles,JSON.stringify(e.articles)),localStorage.setItem(n.g.newsCount,JSON.stringify(e.totalResults))}getNews(){return JSON.parse(localStorage.getItem(n.g.newsArticles))}getNewsCount(){return localStorage.getItem(n.g.newsCount)}setKeyword(e){localStorage.setItem(n.g.keyword,e)}getKeyword(){return localStorage.getItem(n.g.keyword)}clear(){localStorage.clear()}}},,,,function(e,t,r){},,,function(e,t,r){"use strict";r.r(t);r(7);var n=r(3);var o=r(0),c=r(1);const i=document.querySelector(".search-info__container"),s=document.querySelector(".tbody"),u=document.querySelector('[data-component="TableRowTemplate"]'),a=new n.a,l=new class{constructor(e,t,r,n){this._keywordElem=e.querySelector(".search-info__keyword"),this._newsCountElem=e.querySelector(".search-info__news-count").querySelector(".search-info__number"),this._titleCountElem=e.querySelector(".search-info__article-count").querySelector(".search-info__number"),this._tableRowTemplate=r,this._tbodyElem=n,this._dataStorage=t}setKeywordFromLS(){var e;this._keywordElem.textContent=(e=this._dataStorage.getKeyword()).charAt(0).toUpperCase()+e.slice(1)}setStatistics(){const e=this._dataStorage.getNews();this._newsCountElem.textContent=this._dataStorage.getNewsCount(),this._titleCountElem.textContent=this._countMentionsKeyword(e.map(e=>e.title))}createDiagramm(){const e=this._dataStorage.getNews(),t=this._groupNewsByDate(e),r=this._createDomRows(t);this._tbodyElem.querySelector(".table__scale_position_top").after(...r,this._tbodyElem.querySelector(".table__scale_position_bottom")),this._tbodyElem.querySelector(".table__month").textContent=`(${Object(c.d)(t[0].date)})`}_createDomRows(e){return e.map(e=>{const t=this._countMentionsKeyword(e.titles),r=this._countMentionsKeyword(e.descriptions),n=t+(0===r?1:r);return this._createRow(e.date,n)})}_createRow(e,t){const r=this._tableRowTemplate.content.cloneNode(!0).querySelector(".table__row");return r.querySelector(".table__date").textContent=Object(c.c)(e),r.querySelector(".table__diagram-line").style.width=t+"%",t>o.c?r.querySelector(".table__diagram-data").textContent=t:r.querySelector(".table__diagram-line").title="Количество упоминаний "+t,r}_groupNewsByDate(e){const t=[];return e.forEach(e=>{const r=Object(c.b)(e.publishedAt),n=e.title,o=e.description,i=t.find(e=>e.date===r);i?(i.titles.push(n),i.descriptions.push(o)):t.push({date:r,titles:[n],descriptions:[o]})}),t.reverse(),t}_countMentionsKeyword(e){const t=this._dataStorage.getKeyword().toLowerCase(),r=new RegExp(t,"g");return e.reduce((e,t)=>e+(t.toLowerCase().match(r)||[]).length,0)}}(i,a,u,s);l.setKeywordFromLS(),l.setStatistics(),l.createDiagramm()}]);